<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>One Loop to Rule them All - The Dewy Programming Language</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="ch00-00-introduction.html">Introduction</a></li><li class="chapter-item expanded "><a href="ch01-00-getting-started.html"><strong aria-hidden="true">1.</strong> Getting Started</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch01-01-installation.html"><strong aria-hidden="true">1.1.</strong> Installation</a></li><li class="chapter-item expanded "><a href="ch01-02-hello-world.html"><strong aria-hidden="true">1.2.</strong> Hello, World!</a></li></ol></li><li class="chapter-item expanded "><a href="ch02-00-hello-many-worlds.html"><strong aria-hidden="true">2.</strong> Hello, Many Worlds!</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch02-01-gui.html"><strong aria-hidden="true">2.1.</strong> GUI</a></li><li class="chapter-item expanded "><a href="ch02-02-graphics.html"><strong aria-hidden="true">2.2.</strong> Graphics</a></li><li class="chapter-item expanded "><a href="ch02-03-audio.html"><strong aria-hidden="true">2.3.</strong> Audio</a></li><li class="chapter-item expanded "><a href="ch02-04-networking.html"><strong aria-hidden="true">2.4.</strong> Networking</a></li><li class="chapter-item expanded "><a href="ch02-05a-game-development.html"><strong aria-hidden="true">2.5.</strong> 2D Game Development</a></li><li class="chapter-item expanded "><a href="ch02-05b-game-development.html"><strong aria-hidden="true">2.6.</strong> 3D Game Development</a></li><li class="chapter-item expanded "><a href="ch02-06-web-development.html"><strong aria-hidden="true">2.7.</strong> Web Development</a></li><li class="chapter-item expanded "><a href="ch02-07-databases.html"><strong aria-hidden="true">2.8.</strong> Databases</a></li><li class="chapter-item expanded "><a href="ch02-08-cryptography.html"><strong aria-hidden="true">2.9.</strong> Cryptography</a></li><li class="chapter-item expanded "><a href="ch02-09-operating-systems.html"><strong aria-hidden="true">2.10.</strong> Operating Systems</a></li><li class="chapter-item expanded "><a href="ch02-10-compilers.html"><strong aria-hidden="true">2.11.</strong> Compilers</a></li><li class="chapter-item expanded "><a href="ch02-11-scientific-computing.html"><strong aria-hidden="true">2.12.</strong> Scientific Computing</a></li><li class="chapter-item expanded "><a href="ch02-12-robotics.html"><strong aria-hidden="true">2.13.</strong> Robotics</a></li><li class="chapter-item expanded "><a href="ch02-13-machine-learning.html"><strong aria-hidden="true">2.14.</strong> Machine Learning</a></li></ol></li><li class="chapter-item expanded "><a href="chxx-features.html"><strong aria-hidden="true">3.</strong> Language Features</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="units.html"><strong aria-hidden="true">3.1.</strong> Units</a></li><li class="chapter-item expanded "><a href="string-interpolation.html"><strong aria-hidden="true">3.2.</strong> String Interpolation</a></li><li class="chapter-item expanded "><a href="basic-data-types.html"><strong aria-hidden="true">3.3.</strong> Basic Data Types</a></li><li class="chapter-item expanded "><a href="container-types.html"><strong aria-hidden="true">3.4.</strong> Container Types</a></li><li class="chapter-item expanded "><a href="range-types.html"><strong aria-hidden="true">3.5.</strong> Range Types</a></li><li class="chapter-item expanded "><a href="object-types.html"><strong aria-hidden="true">3.6.</strong> Object Types</a></li><li class="chapter-item expanded "><a href="function-types.html"><strong aria-hidden="true">3.7.</strong> Function Types</a></li><li class="chapter-item expanded "><a href="operators.html"><strong aria-hidden="true">3.8.</strong> Operators</a></li><li class="chapter-item expanded "><a href="number-bases.html"><strong aria-hidden="true">3.9.</strong> Number Bases</a></li><li class="chapter-item expanded "><a href="basic-math.html"><strong aria-hidden="true">3.10.</strong> Basic Math</a></li><li class="chapter-item expanded "><a href="linear-algebra.html"><strong aria-hidden="true">3.11.</strong> Linear Algebra</a></li><li class="chapter-item expanded "><a href="functional-programming.html"><strong aria-hidden="true">3.12.</strong> Functional Programming</a></li><li class="chapter-item expanded "><a href="meta-programming.html"><strong aria-hidden="true">3.13.</strong> Meta Programming</a></li><li class="chapter-item expanded "><a href="flow-control.html"><strong aria-hidden="true">3.14.</strong> Flow Control</a></li><li class="chapter-item expanded "><a href="loops.html" class="active"><strong aria-hidden="true">3.15.</strong> One Loop to Rule them All</a></li><li class="chapter-item expanded "><a href="blocks-statements-expressions.html"><strong aria-hidden="true">3.16.</strong> Blocks, Statements, and Expressions</a></li><li class="chapter-item expanded "><a href="meta-syntax.html"><strong aria-hidden="true">3.17.</strong> Meta Syntax</a></li></ol></li><li class="chapter-item expanded "><a href="wipmisc.html"><strong aria-hidden="true">4.</strong> WIP/Misc. Ideas</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Dewy Programming Language</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="one-loop-to-rule-them-all"><a class="header" href="#one-loop-to-rule-them-all">One Loop to Rule them All</a></h1>
<p>Other languages make use of sometimes multiple keywords such as <code>for</code>, <code>while</code>, <code>do-while</code>, <code>for each</code>, etc., to handle looping over a piece of code. Dewy instead simply uses the <code>loop</code> keyword to handle all forms of looping.</p>
<p>Loops start with the <code>loop</code> keyword followed by either an expression the produces a boolean <code>true</code>/<code>false</code> value, or a <code>&lt;value&gt; in &lt;iterable&gt;</code> expression. The loop is then attached either below, or above, to a block/expression which is executed multiple times</p>
<h2 id="infinite-loops"><a class="header" href="#infinite-loops">Infinite Loops</a></h2>
<p>An infinite loop is one that never ends. They are constructed by calling loop with the condition fixed to <code>true</code>, which ensures that the loop will always repeat.</p>
<pre><code class="language-dewy">loop true
{
    //do something repeatedly forever
}
</code></pre>
<p>The only way to leave an infinite loop is via the <code>break</code>, and <code>return</code> keywords.</p>
<h2 id="while-loops"><a class="header" href="#while-loops">While Loops</a></h2>
<p>A while loop is a loop that executes &quot;while&quot; some condition is true. </p>
<pre><code class="language-dewy">loop i &gt;? 0
{
    //while i is greater than 0, do something 
}
</code></pre>
<p>If the condition is false before the loop starts, the body of the loop will never be entered. If you want the loop body to be entered at least once, you can use a do while loop</p>
<pre><code class="language-dewy">{
    //do something, while i is less or equal to 10
}
loop i &lt;=? 10
</code></pre>
<p>Instead of checking the condition at the start of the loop, the condition is checked at the end of each cycle. This way, the body is guaranteed to execute at least once.</p>
<h2 id="for-loops"><a class="header" href="#for-loops">For Loops</a></h2>
<p>A for loop, and similarly a for-each loop is a loop that performs the body &quot;for each&quot; item in a range or collection.</p>
<pre><code class="language-dewy">loop i in 1:5
{
    print('{i}, ') 
}
</code></pre>
<p>Which prints out <code>1, 2, 3, 4, 5, </code> to the console. For loops can also iterate over the items in any type of container. Iterating over a list looks like this</p>
<pre><code class="language-dewy">loop fruit in ['apple' 'banana' 'peach' 'pear']
{
    print('I like to eat {fruit}!')
}
</code></pre>
<p>Which prints the following to the console</p>
<pre><code>I like to eat apple
I like to eat banana
I like to eat peach
I like to eat pear
</code></pre>
<p>Items in a dictionary can be iterated over like so</p>
<pre><code class="language-dewy">ratings = [
    'star wars' -&gt; 73
    'star trek' -&gt; 89
    'star gate' -&gt; 84
    'battlestar galactica' -&gt; 87
    'legend of the galactic heroes' -&gt; 100
]

loop show, rating in ratings
{
    printl('I give {show} a {rating} out 100')
}

//TODO-&gt;syntax might change, depending on if dicts can return either 1 or 2 values for iterating over 
//loop show, rating in ratings.keys, ratings.values
//I think the 1 instance where left parameters doesn't match the right parameters is in the case of a single dict? otherwise you have to specify with _ to ignore
</code></pre>
<p>This prints out the following to the console</p>
<pre><code>I give star wars a 73 out of 100
I give star trek a 89 out of 100
I give star gate a 84 out of 100
I give battlestar galactica a 87 out of 100
I give legend of the galactic heroes a 100 out of 100
</code></pre>
<p>Lastly, you can also put the loop condition at the end of the block, to ensure the block executes at least once</p>
<pre><code>{
    //body is looped through 11 times.
}
loop i in 1:10
</code></pre>
<p>Note that the variable <code>i</code> does note exist on the first iteration of the loop, so do while loops don't tend to be used for iterating over lists or dictionaries. </p>
<p>(TODO-&gt;perhaps talk about introspection to check if a variable exists, thus indicating actions to do/not do on the first iteration when the variable doesn't exist)</p>
<h2 id="do-loop-do"><a class="header" href="#do-loop-do">Do Loop Do</a></h2>
<p>Following the pattern that a regular loop has the condition at the top, and a do-loop has the condition at the bottom, we can construct a loop that is sandwiched between two loop bodies</p>
<pre><code>{
    //occurs before condition is checked
}
loop i not =? 42
{
    //occurs after condition is checked
}
</code></pre>
<p>In this loop, the first block is guaranteed to execute at least once. Then we check the condition, and then if true, we execute the second block, then repeat the loop, execute the first block, and then check the condition again, repeating until the condition is false, or we have iterated over all elements. </p>
<h2 id="whitespace-and-semicolons"><a class="header" href="#whitespace-and-semicolons">Whitespace and Semicolons</a></h2>
<p>If you're wondering how the loop keyword knows whether it's a regular <code>loop {block}</code> or a do-while <code>{block} loop</code>, so am I.</p>
<p>Absent any other indicators, the loop keyword will use the spacing between it and surrounding blocks of code or expressions, to determine what it is looping. If a block/expression is on the same line or adjacent line as the <code>loop</code> keyword, then that block will be executed as part of the loop</p>
<pre><code>{
    //part of the loop
} loop condition {
    //part of the loop
}


{
    //part of the loop
}
loop condition
{
    //part of the loop
}


{
    //NOT part of the loop
}

loop condition
{
    //part of the loop
}



//This will (probably) raise an error during compilation as it is ambiguous
//the alternative might be whichever block is closer
{
    //NOT part of the loop
}

loop condition

{
    //NOT part of the loop
}

</code></pre>
<p>If you want to be more explicit about which block is attached to the loop, you can use <code>;</code> semicolons which act as a sort of empty block that binds to the loop. (Or you could use an actual empty block <code>{}</code>)</p>
<pre><code>{
    //NOT part of the loop
};
loop condition
{
    //part of the loop
}

{
    //part of the loop
} loop condition; {
    //NOT part of the loop
}
</code></pre>
<h2 id="break-continue-return-inside-loops"><a class="header" href="#break-continue-return-inside-loops">Break, Continue, Return inside Loops</a></h2>
<p>TODO-&gt;write this. follows basic principles of other languages. extra is that you can use <code>#hashtags</code> to break/continue from inside nested loops</p>
<h2 id="loop-generators"><a class="header" href="#loop-generators">Loop Generators</a></h2>
<p>Let's look at this example</p>
<pre><code>loop i in 1:10
{
    i
}
</code></pre>
<p>Every iteration of the loop, the current value of <code>i</code> is &quot;expressed&quot;, that is to say, the value could be stored in a variable or a container.</p>
<p>Lets capture the expressed value in a container by wrapping the loop in <code>[]</code> brackets</p>
<pre><code>[loop i in 1:10 {i}]
</code></pre>
<p>This &quot;generates&quot; the array <code>[1 2 3 4 5 6 7 8 9 10]</code>, which we can then store into a variable</p>
<pre><code>my_array = [loop i in 1:10 {i}]

//optional to omit the braces since only a single expression is in the body
my_array = [loop i in 1:10 i]
</code></pre>
<p>And thus we have created the simplest list generator. </p>
<h3 id="multiple-expressions-per-iteration"><a class="header" href="#multiple-expressions-per-iteration">Multiple Expressions per Iteration</a></h3>
<p>Generators can do a lot of interesting things. For example we can express multiple values on a single loop iteration</p>
<pre><code>//note the braces are not optional in this case
my_array = [loop i in 1:5 { i i^2 }]
</code></pre>
<p>producing the array <code>[1 1 2 4 3 9 4 16 5 25]</code>. </p>
<p>We can also construct a dictionary by expressing with a <code>-&gt;</code> between two values</p>
<pre><code>squares = [loop i in 1:5 { i -&gt; i^2 }]
</code></pre>
<p>which produces the dictionary <code>[1-&gt;1 2-&gt;4 3-&gt;9 4-&gt;16 5-&gt;25]</code> which points from values to their squares.</p>
<h3 id="multidimensional-generators"><a class="header" href="#multidimensional-generators">Multidimensional Generators</a></h3>
<p>You can generate a multidimensional array using multiple nested loops. For example</p>
<pre><code>indices = 
[
    loop i in 1:5 
    [
        loop j in 1:5 
        [ 
            i 
            j 
        ] 
    ] 
]
</code></pre>
<p>which produces the following 3D array representing the indices of a 5x5 matrix as tuples</p>
<pre><code>indices = [
    [[1 1] [1 2] [1 3] [1 4] [1 5]]
    [[2 1] [2 2] [2 3] [2 4] [2 5]]
    [[3 1] [4 2] [3 3] [3 4] [3 5]]
    [[4 1] [4 2] [4 3] [4 4] [4 5]]
    [[5 1] [5 2] [5 3] [5 4] [5 5]]
]
</code></pre>
<p>And so many more things are possible. Loop generators are about as flexible a feature as one could imagine. It's really up to you how you want to apply them</p>
<h3 id="maybe-repeated-function-calls"><a class="header" href="#maybe-repeated-function-calls">(Maybe) Repeated Function Calls</a></h3>
<p>(TODO-&gt;decide how this plays with function vectorization...)</p>
<p>In the same way a container can capture expressed items from a loop, and collect them all together, a function can capture expressed items from a loop, and perform a function on each item</p>
<pre><code>//example definition of printl
printl = str =&gt; system.console.write('{s}\n')
printl( loop i in 1:10 {i} )
</code></pre>
<p>In this example, <code>printl</code> is called for each value of <code>i</code>, thus printing out</p>
<pre><code>1
2
3
4
5
6
7
8
9
10
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="flow-control.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="blocks-statements-expressions.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="flow-control.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="blocks-statements-expressions.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
